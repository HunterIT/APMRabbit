<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head><script src="http://jwpsrv.com/library/9Xd9rv1IEeKDbSIACusDuQ.js"></script>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="stylesheet" type="text/css" href="../images/style.css" />
<title>APMRabbit GoPro Software</title>
<script type='text/JavaScript'>
			function getXhr(){
				var xhr = null;
				if(window.XMLHttpRequest) // Firefox and others
					xhr = new XMLHttpRequest();
				else if(window.ActiveXObject){ // Internet Explorer
					try {
						xhr = new ActiveXObject("Msxml2.XMLHTTP");
					} catch (e) {
						xhr = new ActiveXObject("Microsoft.XMLHTTP");
					}
				}
				else { // XMLHttpRequest no supported
					alert("Votre navigateur ne supporte pas les objets XMLHTTPRequest...");
					xhr = false;
				}
				return xhr
			}
 
			/**
			* Command
			*/
			function command(device, app, command){
				var xhr = getXhr()
 
				xhr.onreadystatechange = function(){
 
					if(xhr.readyState == 4 && xhr.status == 200){
						alert(xhr.responseText);
					}
				}
				xhr.open('GET','http://10.5.5.9:80/'+device+'/'+app+'?t='+document.getElementById('wifiPassword').value+'&p='+command);
				xhr.send(null);
			}
	</script>		
</head>

<body>
    <div id="page">
		
        <div id="header">
        	<h1>APMRabbit</h1>
            <h2>Take control, stream, record your GoPro on your APMRover.</h2>
            
      </div>
  <div id="bar">
        	<div class="link"><a href="../index.html">home</a></div>
            <div class="link"><a href="about.html">about</a></div>
            <div class="link"><a href="#">stream</a></div>
            <div class="link"><a href="settings.html">settings</a></div>
            <div class="link"><a href="view.html">view content</a></div>
            <div class="link"><a href="#">faq</a></div>
            <div class="link"><a href="#">contact</a></div>
      </div>
        <div class="contentTitle"><h1>Stream GoPro</h1></div>
        <div class="contentText">
		<embed type="application/x-vlc-plugin"
			   name="goprolivestream"
			   autoplay="yes" loop="no" width="675" height="400"
			   target="http://10.5.5.9:8080/live/amba.m3u8" />
        </div>
        <div class="contentTitle"><h1>Basic Controls</h1></div>
        <div class="contentText">
		Type your camera password ("goprohero" default):
        <input required="required" placeholder="goprohero" id="wifiPassword"
        type="password" class="password" input autocomplete="on" /><button>Set Password</button>
		<p><h2>Please select a camera mode first:</h2></p>
		
           <table style="width:100%">
				<tr>
				<td><input type="image" src="../images/gopro_video.png" onclick="command('camera','CM','%00')" name="Video Mode" width="90" height="70"></td>
				<td><input type="image" src="../images/gopro_photo.png" onclick="command('camera','CM','%01')" name="Photo Mode" width="90" height="70"></td>
				<td><input type="image" src="../images/gopro_burst.png" onclick="command('camera','CM','%02')" name="Burst Mode" width="90" height="70"></td>
				<td><input type="image" src="../images/gopro_timelapse.png" onclick="command('camera','CM','%03')" name="Time Lapse Mode" width="90" height="70"></td>
				</tr>
			<tr>
				<td><button type="button" onclick="command('bacpac','SH','%01')">Start Recording</button></td>
				<td><button type="button" onclick="command('bacpac','SH','%01')">Take a Picture</button></td>
				<td><button type="button" onclick="command('bacpac','SH','%01')">Start Burst</button></td>
				<td><button type="button" onclick="command('bacpac','SH','%01')">Start TimeLapse</button></td>
				</tr>
			<tr>
				<td><button type="button" onclick="command('bacpac','SH','%00')">Stop Recording</button></td><td></td><td></td>
				<td><button type="button" onclick="command('bacpac','SH','%00')">Stop TimeLapse</button></td>
				</tr>
		</table> 
        </div>
</body>
</html>
